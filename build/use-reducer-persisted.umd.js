!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("universal-cookie")):"function"==typeof define&&define.amd?define(["react","universal-cookie"],t):(e=e||self).useReducerPersisted=t(e.react,e.universalCookie)}(this,function(e,t){t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n="@USE_REDUCER_PERSISTED_SET_FULL_STATE",r=function(e,n,r){var o=r instanceof t;try{var i=o?r.get(e,!0):r.getItem(e);return void 0!==i&&i?o?i:JSON.parse(i):"function"==typeof n?n():void 0!==n?n:{}}catch(e){return n}};return function(o,i,u,a,c){void 0===a&&(a="local");var s,f=c||{},l=f.step,d=void 0===l?1e3:l,p=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(f,["step"]),y=e.useRef();try{switch(a){case"local":s=localStorage,beark;case"session":s=sessionStorage;break;case"cookie":s=new t}}catch(e){}var v=e.useReducer(function(e){return function(t,r){var o=r.type,i=r.payload;return o===n?i:e(t,{type:o,payload:i})}}(i),null,function(){return r(o,u,s)}),S=v[0],g=v[1],E=e.useRef(S);return e.useEffect(function(){"cookie"===a?y.current=setInterval(function(){JSON.stringify(s.get(o))!==JSON.stringify(E.current)&&g({type:n,payload:r(o,u,s)})},d):window.addEventListener("storage",function(e){e.key===o&&g({type:n,payload:JSON.parse(e.newValue)})})},[]),e.useEffect(function(){E.current=S,function(e,n,r,o){r instanceof t?r.set(e,n,o||null):r.setItem(e,JSON.stringify(n))}(o,S,s,p)},[S]),[S,g]}});
