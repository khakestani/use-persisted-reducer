function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("react"),n=(e(t),e(require("universal-cookie"))),r="@USE_REDUCER_PERSISTED_SET_FULL_STATE",o=function(e,t,r){var o=r instanceof n;try{var u=o?r.get(e,!0):r.getItem(e);return void 0!==u&&u?o?u:JSON.parse(u):"function"==typeof t?t():void 0!==t?t:{}}catch(e){return t}};module.exports=function(e,u,a,i,c){void 0===i&&(i="local");var s,f=c||{},l=f.step,y=void 0===l?1e3:l,d=function(e,t){if(null==e)return{};var n,r,o={},u=Object.keys(e);for(r=0;r<u.length;r++)t.indexOf(n=u[r])>=0||(o[n]=e[n]);return o}(f,["step"]),p=t.useRef();try{switch(i){case"local":s=localStorage,beark;case"session":s=sessionStorage;break;case"cookie":s=new n}}catch(e){}var v=t.useReducer(function(e){return function(t,n){var o=n.type,u=n.payload;return o===r?u:e(t,{type:o,payload:u})}}(u),null,function(){return o(e,a,s)}),S=v[0],g=v[1],E=t.useRef(S);return t.useEffect(function(){"cookie"===i?p.current=setInterval(function(){JSON.stringify(s.get(e))!==JSON.stringify(E.current)&&g({type:r,payload:o(e,a,s)})},y):window.addEventListener("storage",function(t){t.key===e&&g({type:r,payload:JSON.parse(t.newValue)})})},[]),t.useEffect(function(){E.current=S,function(e,t,r,o){r instanceof n?r.set(e,t,o||null):r.setItem(e,JSON.stringify(t))}(e,S,s,d)},[S]),[S,g]};
